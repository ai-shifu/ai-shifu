# AI-Shifu Environment Configuration - COMPLETE SET
# Copy this file to docker/.env (or .env) to boot the Docker stack with sane defaults
# Set at least one LLM API key (e.g., OPENAI_API_KEY) before using in production.


#============================================================
# Alibaba Cloud
#============================================================

# Alibaba Cloud OSS Access Key ID
# (Optional - default: )
# Secret value
ALIBABA_CLOUD_OSS_ACCESS_KEY_ID=""

# Alibaba Cloud OSS Access Key Secret
# (Optional - default: )
# Secret value
ALIBABA_CLOUD_OSS_ACCESS_KEY_SECRET=""

# Alibaba Cloud OSS base URL
# (Optional - default: )
ALIBABA_CLOUD_OSS_BASE_URL=""

# Alibaba Cloud OSS bucket name
# (Optional - default: )
ALIBABA_CLOUD_OSS_BUCKET=""

# Alibaba Cloud OSS Courses Access Key ID
# (Optional - default: )
# Secret value
ALIBABA_CLOUD_OSS_COURSES_ACCESS_KEY_ID=""

# Alibaba Cloud OSS Courses Access Key Secret
# (Optional - default: )
# Secret value
ALIBABA_CLOUD_OSS_COURSES_ACCESS_KEY_SECRET=""

# Alibaba Cloud OSS Courses bucket name
# (Optional - default: )
ALIBABA_CLOUD_OSS_COURSES_BUCKET=""

# Alibaba Cloud OSS Courses endpoint
# (Optional - default: oss-cn-beijing.aliyuncs.com)
ALIBABA_CLOUD_OSS_COURSES_ENDPOINT="oss-cn-beijing.aliyuncs.com"

# Alibaba Cloud OSS Courses URL
# (Optional - default: )
ALIBABA_CLOUD_OSS_COURSES_URL=""

# Alibaba Cloud OSS endpoint
# (Optional - default: oss-cn-beijing.aliyuncs.com)
ALIBABA_CLOUD_OSS_ENDPOINT="oss-cn-beijing.aliyuncs.com"

# Alibaba Cloud settings for sending SMS and uploading files
# (Optional - default: )
# Secret value
ALIBABA_CLOUD_SMS_ACCESS_KEY_ID=""

# Alibaba Cloud SMS Access Key Secret
# (Optional - default: )
# Secret value
ALIBABA_CLOUD_SMS_ACCESS_KEY_SECRET=""

# Alibaba Cloud SMS sign name
# (Optional - default: )
ALIBABA_CLOUD_SMS_SIGN_NAME=""

# Alibaba Cloud SMS template code
# (Optional - default: )
ALIBABA_CLOUD_SMS_TEMPLATE_CODE=""


#============================================================
# App
#============================================================

# The count of history messages to append to LLM's context in ask
# (Optional - default: 10)
# Type: int
ASK_MAX_HISTORY_LEN="10"

# Path of log file
# (Optional - default: logs/ai-shifu.log)
LOGGING_PATH="logs/ai-shifu.log"

# Shifu permission cache expiration time in seconds
# (Optional - default: 300)
# Type: int
SHIFU_PERMISSION_CACHE_EXPIRE="300"

# Timezone setting for the application
# (Optional - default: UTC)
TZ="UTC"


#============================================================
# Auth
#============================================================

# When enabled, users logging in from the admin interface are automatically marked as creators and granted demo course permissions (DEMO_SHIFU_BID / DEMO_EN_SHIFU_BID if configured). Intended for demo and staging environments only.
# (Optional - default: True)
# Type: bool
ADMIN_LOGIN_GRANT_CREATOR_WITH_DEMO="True"

# OAuth client ID issued by Google
# (Optional - default: )
GOOGLE_OAUTH_CLIENT_ID=""

# OAuth client secret issued by Google
# (Optional - default: )
# Secret value
GOOGLE_OAUTH_CLIENT_SECRET=""

# IP ban time (seconds)
# (Optional - default: 86400)
# Type: int
IP_BAN_TIME="86400"

# The maximum number of allowed sends
# (Optional - default: 10)
# Type: int
IP_MAIL_LIMIT_COUNT="10"

# The time window for statistics of the number of sends by IP (seconds)
# (Optional - default: 3600)
# Type: int
IP_MAIL_LIMIT_TIME="3600"

# The maximum number of times IP can send text messages
# (Optional - default: 10)
# Type: int
IP_SMS_LIMIT_COUNT="10"

# The time window for statistics of the number of text messages sent by IP (seconds)
# (Optional - default: 3600)
# Type: int
IP_SMS_LIMIT_TIME="3600"

# The expiration time of the email verification code (seconds)
# (Optional - default: 300)
# Type: int
MAIL_CODE_EXPIRE_TIME="300"

# The interval time for sending emails
# (Optional - default: 60)
# Type: int
MAIL_CODE_INTERVAL="60"

# Expire time for phone verification code in seconds
# (Optional - default: 300)
# Type: int
PHONE_CODE_EXPIRE_TIME="300"

# Expire time for password reset code in seconds
# (Optional - default: 300)
# Type: int
RESET_PWD_CODE_EXPIRE_TIME="300"

# Secret key for JWT token signing and verification
# CRITICAL: Used to encrypt/decrypt user authentication tokens
# - Must be a strong random string (at least 32 characters recommended)
# - DO NOT change in production (will invalidate all user sessions)
# - Keep different values for dev/test/prod environments
# - Never commit to version control
# Generate secure key: python -c "import secrets; print(secrets.token_urlsafe(32))"
# (REQUIRED - must be set)
# (Has validation)
# Secret value
SECRET_KEY="ai-shifu"

# The minimum interval time for sending text messages to the same mobile phone number
# (Optional - default: 60)
# Type: int
SMS_CODE_INTERVAL="60"

# Token expiration time in seconds
# (Optional - default: 604800)
# Type: int
TOKEN_EXPIRE_TIME="604800"

# Universal verification code for testing.
# **SECURITY WARNING:** Do NOT set this in production environments.
# If set, it will allow anyone to bypass verification.
# Only use for local development or testing.
# (Optional - handled by libraries)
UNIVERSAL_VERIFICATION_CODE="1024"

# WeChat App ID for OAuth / QR login
# (Optional - default: )
WECHAT_APP_ID=""

# WeChat App secret for server-side exchanges
# (Optional - default: )
# Secret value
WECHAT_APP_SECRET=""


#============================================================
# Content Detection
#============================================================

# Content detection provider
# (Optional - default: ilivedata)
CHECK_PROVIDER="ilivedata"

# ILIVEDATA project ID
# (Optional - default: )
ILIVEDATA_PID=""

# ILIVEDATA secret key
# (Optional - default: )
# Secret value
ILIVEDATA_SECRET_KEY=""

# Netease Yidun business ID
# (Optional - default: )
NETEASE_YIDUN_BUSINESS_ID=""

# Netease Yidun secret ID
# (Optional - default: )
# Secret value
NETEASE_YIDUN_SECRET_ID=""

# Netease Yidun secret key
# (Optional - default: )
# Secret value
NETEASE_YIDUN_SECRET_KEY=""


#============================================================
# Database
#============================================================

# MySQL database connection URI
# Example: mysql://username:password@hostname:3306/database_name?charset=utf8mb4
# (REQUIRED - must be set)
# Secret value
SQLALCHEMY_DATABASE_URI="mysql://root:ai-shifu@ai-shifu-mysql:3306/ai-shifu?charset=utf8mb4"

# SQLAlchemy max overflow connections
# (Optional - default: 20)
# Type: int
SQLALCHEMY_MAX_OVERFLOW="20"

# SQLAlchemy pool recycle time in seconds
# (Optional - default: 3600)
# Type: int
SQLALCHEMY_POOL_RECYCLE="3600"

# SQLAlchemy connection pool size
# (Optional - default: 20)
# Type: int
SQLALCHEMY_POOL_SIZE="20"

# SQLAlchemy pool timeout in seconds
# (Optional - default: 30)
# Type: int
SQLALCHEMY_POOL_TIMEOUT="30"


#============================================================
# Email
#============================================================

# SMTP password
# (Optional - default: )
# Secret value
SMTP_PASSWORD=""

# SMTP server port
# (Optional - default: 25)
# Type: int
# (Has validation)
SMTP_PORT="25"

# SMTP sender email address
# (Optional - default: )
SMTP_SENDER=""

# SMTP server address
# (Optional - default: )
SMTP_SERVER=""

# SMTP username
# (Optional - default: )
SMTP_USERNAME=""


#============================================================
# Flask
#============================================================

# Environment (development/production)
# (Optional - default: production)
ENV="production"

# Flask application entry point
# (Optional - default: app.py)
FLASK_APP="app.py"

# Application mode
# (Optional - default: api)
MODE="api"

# API path prefix
# (Optional - default: /api)
PATH_PREFIX="/api"

# Server software identification (e.g., gunicorn)
# (Optional - default: )
SERVER_SOFTWARE=""

# Enable Swagger API documentation
# (Optional - default: False)
# Type: bool
SWAGGER_ENABLED="False"


#============================================================
# Frontend
#============================================================

# Umami analytics script URL
# (Optional - default: )
ANALYTICS_UMAMI_SCRIPT=""

# Umami analytics site identifier
# (Optional - default: )
ANALYTICS_UMAMI_SITE_ID=""

# Currency symbol used in Cook Web (default: ¥)
# (Optional - default: ¥)
CURRENCY_SYMBOL="¥"

# Enable Eruda debug console
# (Optional - default: False)
# Type: bool
DEBUG_ERUDA_ENABLED="False"

# Default course id for Cook Web
# (Optional - default: )
DEFAULT_COURSE_ID=""

# Default login method tab. Values: "phone" | "email" | "google"
# (Optional - default: phone)
DEFAULT_LOGIN_METHOD="phone"

# Default redirect path after login
# (Optional - default: /admin)
HOME_URL="/admin"

# Login methods exposed to users.
# Values: "phone" | "email" | "google" combinations (comma-separated)
# Default: "phone".
# (Optional - default: phone)
LOGIN_METHODS_ENABLED="phone"

# Custom wide logo URL override returned by /api/config
# (Optional - default: )
LOGO_WIDE_URL=""

# Custom square logo URL override returned by /api/config
# (Optional - default: )
LOGO_SQUARE_URL=""

# Custom favicon URL override returned by /api/config
# (Optional - default: )
FAVICON_URL=""

# Frontend server port
# (Optional - default: 5000)
# Type: int
# (Has validation)
PORT="5000"

# Enable Stripe payment entry points on Cook Web
# (Optional - default: False)
# Type: bool
STRIPE_ENABLED="False"

# Always show lesson tree in Cook Web
# (Optional - default: False)
# Type: bool
UI_ALWAYS_SHOW_LESSON_TREE="False"

# Horizontal logo URL for Cook Web
# (Optional - default: )
UI_LOGO_HORIZONTAL=""

# Vertical logo URL for Cook Web
# (Optional - default: )
UI_LOGO_VERTICAL=""


#============================================================
# Integrations
#============================================================

# Lark (Feishu) app ID
# (Optional - default: )
LARK_APP_ID=""

# Lark (Feishu) app secret
# (Optional - default: )
# Secret value
LARK_APP_SECRET=""


#============================================================
# Legal
#============================================================

# Service agreement URL for English (en-US) users. Leave empty to disable the link.
# (Optional - default: )
LEGAL_AGREEMENT_URL_EN_US=""

# Service agreement URL for Chinese (zh-CN) users. Leave empty to disable the link.
# (Optional - default: )
LEGAL_AGREEMENT_URL_ZH_CN=""

# Privacy policy URL for English (en-US) users. Leave empty to disable the link.
# (Optional - default: )
LEGAL_PRIVACY_URL_EN_US=""

# Privacy policy URL for Chinese (zh-CN) users. Leave empty to disable the link.
# (Optional - default: )
LEGAL_PRIVACY_URL_ZH_CN=""


#============================================================
# Llm
#============================================================

# ByteDance Volcengine Ark Access Key ID
# (Optional - default: )
# Secret value
ARK_ACCESS_KEY_ID=""

# ByteDance Volcengine Ark API Key
# (Optional - default: )
# Secret value
ARK_API_KEY=""

# ByteDance Volcengine Ark Secret Access Key
# (Optional - default: )
# Secret value
ARK_SECRET_ACCESS_KEY=""

# Zhipu BigModel API Key (alternative format)
# (Optional - default: )
# Secret value
BIGMODEL_API_KEY=""

# DeepSeek API Key
# (Optional - default: )
# Secret value
DEEPSEEK_API_KEY=""

# DeepSeek API URL
# (Optional - default: https://api.deepseek.com)
DEEPSEEK_API_URL="https://api.deepseek.com"

# Default LLM model. Supported models:
# OpenAI: gpt-4o-latest, gpt-4o-mini, gpt-4, gpt-3.5-turbo, chatgpt-4o-latest
# ERNIE: ERNIE-4.0-8K, ERNIE-3.5-8K, ERNIE-3.5-128K, ERNIE-Speed-8K, ERNIE-Speed-128K
# GLM: glm-4, glm-4-air, glm-4-airx, glm-4-flash, glm-4v, glm-3-turbo
# Qwen: qwen-long, qwen-max, qwen-max-longcontext, qwen-plus, qwen-turbo, qwen2-*
# DeepSeek: deepseek-chat
# Gemini: gemini-1.5-flash, gemini-1.5-flash-8b, gemini-1.5-pro
# (Optional - default: )
DEFAULT_LLM_MODEL=""

# Default temperature for LLM generation
# (Optional - default: 0.3)
# Type: float
# (Has validation)
DEFAULT_LLM_TEMPERATURE="0.3"

# Baidu ERNIE API ID
# (Optional - default: )
# Secret value
ERNIE_API_ID=""

# Baidu ERNIE API Key
# (Optional - default: )
# Secret value
ERNIE_API_KEY=""

# Baidu ERNIE API Secret
# (Optional - default: )
# Secret value
ERNIE_API_SECRET=""

# Google Gemini API key
# (Optional - default: )
# Secret value
GEMINI_API_KEY=""

# Optional Google Gemini API base URL (leave blank to use default)
# (Optional - default: )
GEMINI_API_URL=""

# Zhipu BigModel GLM API Key
# (Optional - default: )
# Secret value
GLM_API_KEY=""

# Comma separated list of allowed LLM models to expose in UI. When empty, all detected models are shown.
# (Optional - default: )
# Type: list
LLM_ALLOWED_MODELS=""

# Optional display names for allowed LLM models. Must match the length and order of LLM_ALLOWED_MODELS. Ignored otherwise.
# (Optional - default: )
# Type: list
LLM_ALLOWED_MODEL_DISPLAY_NAMES=""

# OpenAI API key for GPT models
# (Optional - default: )
# Secret value
OPENAI_API_KEY=""

# OpenAI API base URL
# (Optional - handled by libraries)
OPENAI_BASE_URL=""

# Alibaba Cloud Qwen API Key
# (Optional - default: )
# Secret value
QWEN_API_KEY=""

# Alibaba Cloud Qwen API URL
# (Optional - default: )
QWEN_API_URL=""

# SiliconFlow API Key
# (Optional - default: )
# Secret value
SILICON_API_KEY=""


#============================================================
# Monitoring
#============================================================

# Langfuse host URL
# (Optional - default: )
LANGFUSE_HOST=""

# Langfuse settings for tracking LLM
# (Optional - default: )
# Secret value
LANGFUSE_PUBLIC_KEY=""

# Langfuse secret key for LLM tracking
# (Optional - default: )
# Secret value
LANGFUSE_SECRET_KEY=""


#============================================================
# Payment
#============================================================

# Comma-separated list of enabled payment providers (e.g., pingxx,stripe)
# (Optional - default: pingxx,stripe)
PAYMENT_CHANNELS_ENABLED="pingxx,stripe"

# Order expiration time in seconds before a new order is created
# (Optional - default: 600)
# Type: int
PAY_ORDER_EXPIRE_TIME="600"

# Ping++ application identifier
# (Optional - default: )
PINGXX_APP_ID=""

# Filesystem path to the Ping++ RSA private key
# (Optional - default: )
PINGXX_PRIVATE_KEY_PATH=""

# Ping++ API secret key used for charge creation
# (Optional - default: )
# Secret value
PINGXX_SECRET_KEY=""

# Enable Alipay for Stripe
# (Optional - default: False)
# Type: bool
STRIPE_ALIPAY_ENABLED="False"

# Stripe API version to lock requests against
# (Optional - default: )
STRIPE_API_VERSION=""

# Stripe Checkout cancellation redirect URL
# (Optional - default: )
STRIPE_CANCEL_URL=""

# Default currency code used for Stripe payments
# (Optional - default: usd)
STRIPE_DEFAULT_CURRENCY="usd"

# Stripe publishable key shared with client applications
# (Optional - default: )
STRIPE_PUBLISHABLE_KEY=""

# Stripe secret API key for server-side requests
# (Optional - default: )
# Secret value
STRIPE_SECRET_KEY=""

# Stripe Checkout success redirect URL
# (Optional - default: )
STRIPE_SUCCESS_URL=""

# Stripe webhook signing secret
# (Optional - default: )
# Secret value
STRIPE_WEBHOOK_SECRET=""

# Enable WeChat Pay
# (Optional - default: False)
# Type: bool
STRIPE_WECHAT_PAY_ENABLED="False"


#============================================================
# Redis
#============================================================

# Redis database number
# (Optional - default: 0)
# Type: int
REDIS_DB="0"

# Redis server host (docker-compose service name by default)
# (Optional - default: ai-shifu-redis)
REDIS_HOST="ai-shifu-redis"

# Redis key prefix
# (Optional - default: ai-shifu:)
REDIS_KEY_PREFIX="ai-shifu:"

# Redis password
# (Optional - default: )
# Secret value
REDIS_PASSWORD=""

# Redis server port
# (Optional - default: 6379)
# Type: int
# (Has validation)
REDIS_PORT="6379"

# Redis username
# (Optional - default: )
REDIS_USER=""


#============================================================
# Shifu
#============================================================

# Minimum price of shifu
# (Optional - default: 0.5)
# Type: float
MIN_SHIFU_PRICE="0.5"


#============================================================
# Testing
#============================================================

# Django settings module for testing
# (Optional - default: api.settings)
DJANGO_SETTINGS_MODULE="api.settings"


# ========== END OF CONFIGURATION ==========
# Remember to keep your .env file secure and never commit it to version control
